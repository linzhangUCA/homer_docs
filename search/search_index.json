{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Meet HomeR","text":"<p>Home(plate)R(obot) is an open-source mobile robot platform. HomeR is designed for educational purposes with emphases on autonomous SLAM and navigation. It features a differential drive mobile base regulated by a Raspberry Pi Pico microcontroller. The Robot Operating System (ROS), as a butler serves a Raspberry Pi SBC making high-level decisions.</p> <p></p>"},{"location":"#key-specifications","title":"Key Specifications","text":"Features Details Dimensions 180mm x 180mm x 180mm Microcontroller Raspberry Pi Pico 2 (RP2350) MicroPython Firmware 1.27.0 Computer Raspberry Pi 5 (4GB) Operating System Ubuntu 24.04 Robot Manager ROS2 Jazzy"},{"location":"#open-sourced","title":"Open-Sourced","text":"<ul> <li>Mechanical design: https://github.com/linzhangUCA/homer_me</li> <li>Electrical design: https://github.com/linzhangUCA/homer_ee</li> <li>Microcontroller scripts: https://github.com/linzhangUCA/homer_pico</li> <li>Hardward interfacing (ROS) package: https://github.com/linzhangUCA/homer_bringup</li> <li>SLAM and navigation (ROS) package: https://github.com/linzhangUCA/homer_navigation</li> </ul>"},{"location":"electrical/power/","title":"Power Management","text":"<ul> <li>All the components of HomeR are powered by 2x 18650 Lithium-ion batteries (7.4V nominal).</li> <li>The battery feeds 2x DRV8874 carrier boards to drive 2x brushed DC motors.</li> <li>A Power Expansion Board (PEB) is responsible for converting the coarse battery power (could be 6V to 8.4V) to stabilized 5V, then providing it to the main computing device: Raspberry Pi 5 (RPi5).</li> <li>RPi5 powers up the micro-controller: Raspberry Pi Pico 2 and the LiDAR through the USB ports.</li> <li>Pico 2 eventually serves regulated 5V to power up the ultrasonic sensor and the motor encoders via the <code>VBUS</code> pin.</li> <li>The Pico 2 also powers up an Inertial Measurement Unit (IMU) module: GY-521 with 3.3V via <code>3V3(OUT)</code> pin.</li> </ul> <p>See diagram below to grab a intuitive idea of HomeR's power management.</p> <p></p> <p>Replay</p> <ul> <li>A relay board (HomeR Thalamus) is used for power and signal distribution but not illustrated in the diagram.   The design is hosted in the homer_ee repository.</li> </ul>"},{"location":"mechanical/assembly/","title":"Assembly Guide","text":""},{"location":"mechanical/assembly/#1-wheel-assembly","title":"1 Wheel Assembly","text":""},{"location":"mechanical/assembly/#11-preparation","title":"1.1 Preparation","text":"<ul> <li>1x motor holder (3d printable)</li> <li>1x 25mm diameter DC motor</li> <li>2x M3x10mm screw</li> <li>1x 4mm bore hex motor shaft coupler</li> <li>1x M4x6mm screw (and washer)</li> <li>1x 65mm diameter wheel/tire</li> </ul>"},{"location":"mechanical/assembly/#12-post-assemble","title":"1.2 Post Assemble","text":"<p>Motor Wires</p> <p>Make sure motor wires sticking out from the same side as the flat surface of the motor holder</p> <p></p> <p>You will need to assemble 2 wheels.</p>"},{"location":"mechanical/assembly/#2-base-assembly","title":"2 Base Assembly","text":""},{"location":"mechanical/assembly/#21-preparation","title":"2.1 Preparation","text":"<ul> <li>1x base (3d printable)</li> <li>1x caster wheel (3d printable)</li> <li>2x wheel assembly</li> <li>1x battery holder</li> <li>2x M3x35mm screw (double them to offer extra security to the caster wheel)</li> <li>4x M3x10mm screw (double them to offer extra security to the wheel assemblies)</li> <li>2x M3x6mm screw (double them to offer extra security to the battery holder)</li> <li>8x M3 screw (double them if screw numbers are doubled)</li> </ul>"},{"location":"mechanical/assembly/#22-post-assemble","title":"2.2 Post Assemble","text":"<p>Bottom View</p> <p></p> <p>Top View</p>"},{"location":"mechanical/assembly/#3-electronics-stack","title":"3 Electronics Stack","text":""},{"location":"mechanical/assembly/#31-preparation","title":"3.1 Preparation","text":"<ul> <li>1x Power expansion board</li> <li>1x Raspberry Pi 5</li> <li>1x HomeR Thalamus board (relay)</li> <li>1x Raspberry Pi Pico 2</li> <li>1x GY-521 IMU module</li> <li>1x HC-SR04 ultrasonic module</li> <li>2x Pololu DRV8874 motor driver carrier</li> <li>1x caster wheel (3d printable)</li> <li>2x wheel assembly</li> <li>1x battery holder</li> <li>7x M2.5x16mm M-F standoff (use 8 if extra security is needed)</li> <li>4x M2.5x6mm M-F standoff</li> <li>3x M2.5x6mm screw (use 4 if 8 M2.5x16mm standoff were used)</li> <li>4x M2.5 nut</li> <li>1x 2-Pin cable with JST-RCY female connector</li> <li>1x 2-Pin cable with JST-RCY female connector</li> <li>1x 2-Pin cable with JST-XH2.54 male connector on one end</li> <li>1x 2-Pin cable with JST-XH2.54 male connector on both ends</li> <li>1x Micro-USB cable (data capable)</li> <li>1x USB-C to USB-C cable (data not required)</li> </ul>"},{"location":"mechanical/assembly/#32-post-assemble","title":"3.2 Post Assemble","text":""},{"location":"mechanical/assembly/#321-m25x6mm-stands","title":"3.2.1 M2.5x6mm stands","text":""},{"location":"mechanical/assembly/#322-power-expansion-board-stack","title":"3.2.2 Power expansion board stack","text":"<p>Power Input</p> <p>You'll want to attach the power input cable (with JST-RCY connector) to the blue terminal before stacking the next level (Pi5).</p> <p></p>"},{"location":"mechanical/assembly/#323-raspberry-pi-5-stack","title":"3.2.3 Raspberry Pi 5 stack","text":"<p>Space Above</p> <ul> <li>Use M2.5x16mm or longer standoffs on top of the Pi5, or the HomeR Thalamus board will be likely touching the cooling fan.</li> <li>It is optional to attach GPIO extension to the Pi5.</li> </ul> <p></p>"},{"location":"mechanical/assembly/#324-thalamus-stack","title":"3.2.4 Thalamus stack","text":""},{"location":"mechanical/assembly/#325-finish-differential-drive-mobile-base-electronics-stacking","title":"3.2.5 Finish differential drive mobile base (electronics stacking)","text":"<p>Plug in cables and wires.</p> <p></p>"},{"location":"mechanical/components/","title":"Components and Parts","text":""},{"location":"mechanical/components/#shopping-list","title":"Shopping List","text":"Item Qty. Specs and Notes DC gearmotor 2 25D 6V with 48 CPR Encoder 65mm wheel 2 motorized wheels Motor shaft hex coupler 2 M4 thread 4mm bore M4 x 6mm screw and washer 2 M3 x 6mm screw 4(2) Flat head M3 x 10 screw 17(11) Flat head M3 x 35mm screw 4(2) Flat head M3 x 80mm standoff 5(3) Female-Female, aluminum M3 nut 17(9) Li-ion battery holder 1 Holds two 18650 batteries with switch M2.5 x 6mm + 6mm standoff 4 Female-Male M2.5 x 16mm + 6mm standoff 12 Female-Male M2.5 x 6mm screw 8 M2.5 nut 4 RPi 5 power expansion board 1 6~24V input, 5V/5A PD output Raspberry Pi 5 1 with 4GB+ RAM Raspberry Pi Pico 2 1 Dual processors @ 150MHz Pololu DRV8874 motor driver carrier 2 Delivers continuous 2.1A to a 4.5V to 37V brushed motor GY-521 IMU breakout board 1 Carries 6-axis accelerometer and gyroscope: MPU6050 SR-HC04 ultrasonic distence sensor 1 0.03m to 4m detection within 15\\(^\\circ\\) HomeR thalamus 1 gerber files for JLCPCB RPLidar A1M8 1 12m detection range, 360\\(^\\circ\\) ranging @ 5.5Hz MicroUSB cable 2 USB2.0, 480Mbps data transfer speed USB C charging cable 1 60W power delivery 2-pin JST XH 2.54 cable 1 Male header 2-pin male JST XH 2.54 cable 1 2-pin male JST XH 2.54 connector 1 JST RCY male cable 1 JST RCY female cable 1"},{"location":"mechanical/components/#3d-print-recipe","title":"3D-Print Recipe","text":"<p>You'll need to print out following parts to set up the frame for HomeR.</p> <ul> <li>1x base</li> <li>1x second floor</li> <li>1x caster wheel</li> <li>2x motor holder</li> </ul> <p>Mechanical designs</p> <ul> <li>You can add the <code>3mf</code> profile in OrcaSlicer.</li> <li>The FreeCAD designs are availbale on Github: https://github.com/linzhangUCA/homer_me</li> </ul>"},{"location":"mechanical/components/#tools","title":"Tools","text":"<p>Following tools are handy.</p> <ul> <li>Safety goggles</li> <li>Philips (PH1) screwdriver</li> <li>(2mm) Allen wrench key</li> <li>Needle nose pliers</li> <li>Tweezers</li> <li>Wire cutter and stripper</li> <li>Crimping tool</li> <li>Li-ion battery charger</li> </ul>"},{"location":"setup/bluetooth_gamepad/","title":"Set Up Bluetooth Gamepad","text":"<p>If you have a bluetooth gamepad as shown in the picture below, you can connect it either by a graphical interface or command line interface.</p>"},{"location":"setup/bluetooth_gamepad/#graphical-connection-via-system-settings","title":"(Graphical) Connection via System Settings","text":""},{"location":"setup/bluetooth_gamepad/#1-enter-system-settings","title":"1. Enter System Settings","text":"<p>Press <code>Super</code>/<code>WIN</code>/<code>Cmd</code> key or left click the top-right corner of the Ubuntu desktop to bring out the system search bar. Search \"bluetooth\" then left-click to enter the <code>Bluetooth</code> page in the <code>Settings</code> interface.</p> <p></p> <p></p>"},{"location":"setup/bluetooth_gamepad/#2-start-pairing","title":"2. Start Pairing","text":"<p>On gamepad, press and hold down the <code>HOME</code> and the <code>SHARE</code> button together, until the gamepads's LED starting to make double blinks pattern. The double blinking pattern indicates the gamepad has entered the pairing mode. The connectable gamepad will be appearing in the <code>Devices</code> list, named as \"Wireless Controller\".</p> <p>Warning</p> <p>If the user release the <code>SHARE</code> button too quick or only pressed down the <code>HOME</code> button, the LED will make single blinks and the user will not be able to view/connect the gamepad. Wait for the single blinking to be stopped by itself, then try again by pressing and holding down the <code>HOME</code> and the <code>SHARE</code> button together.</p> <p> </p>"},{"location":"setup/bluetooth_gamepad/#3-connect-bluetooth-device","title":"3. Connect Bluetooth Device","text":"<p>Left-click the \"Wireless Controller\" and wait the device's status turned into \"Connected\". The LED on the gamepad will be staying stabled on.</p> <p></p>"},{"location":"setup/bluetooth_gamepad/#cli-connection-via-command-line","title":"(CLI) Connection via Command Line","text":"<p>There are chances your RPi is running in the headless mode (no monitor attached). And you can connect to a bluetooth device through the command line tool: <code>bluetoothctl</code></p>"},{"location":"setup/bluetooth_gamepad/#1-remote-log-in","title":"1. Remote Log In","text":"<p>In a terminal window on Host Machine, use <code>ssh</code> to log into RPi.</p> <pre><code>ssh &lt;username&gt;@&lt;ip_address&gt;\n</code></pre>"},{"location":"setup/bluetooth_gamepad/#2-start-pairing_1","title":"2. Start Pairing","text":"<p>press and hold down the <code>HOME</code> and the <code>SHARE</code> button together, until the gamepads's LED starting to make double blinks pattern.</p>"},{"location":"setup/bluetooth_gamepad/#3-bluetoothctl-usage","title":"3. <code>bluetoothctl</code> Usage","text":"<ol> <li>In the remote terminal type: <code>bluetoothctl</code>. You'll notice the command prompt changed to <code>[bluetooth]#</code>.</li> <li>Enter <code>scan on</code> to start discovering all the bluetooth devices nearby.</li> <li>The gamepad ready for pairing should be listed as <code>[NEW] Device &lt;MAC_address&gt; Wireless Controller</code>.</li> <li>Enter <code>pair &lt;MAC_address&gt;</code> to pair and auto connect to the bluetooth gamepad (You can use <code>tab</code> to autocomplete the <code>&lt;MAC_address&gt;</code>).</li> <li>Enter <code>exit</code> or simply press <code>Ctrl+d</code> to quit <code>bluetoothctl</code> interface.</li> </ol>"},{"location":"setup/bluetooth_gamepad/#assign-user-account-to-input-group","title":"Assign User account to <code>input</code> Group","text":"<p>ROS 2 needs to access the bluetooth gamepad under <code>/dev/input</code>. Our user account is unlikely having the permission to visit such a location, because the default Ubuntu installation did not assign the <code>$USER</code> account to the <code>input</code> group. We have to enter following command in a terminal then reboot the computer.</p> <pre><code>sudo usermod -aG input $USER\n</code></pre> <p>After reboot, we can check if <code>$USER</code> is assigned to <code>input</code> by command:</p> <pre><code>groups\n# you'll end up getting something like:\n# &lt;username&gt; adm sudo ... input\n</code></pre> <p>You can verify gamepad's availability using a ROS command:</p> <pre><code>ros2 run joy joy_enumerate_device\n</code></pre>"},{"location":"setup/homer_pack/","title":"Set up HomeR Packages","text":"<p>When you have multiple projects to manage, keep HomeR distinctive and organized is important. This involves:</p> <ol> <li>Create a dedicated ROS 2 workspace for HomeR and reserve the <code>src</code> directory right under it.</li> <li>Clone/Download two ROS 2 packages for HomeR.</li> <li>Build the workspace and register HomeR packages.</li> </ol> <pre><code>mkdir -p ~/homer_ws/src  # create workspace and src dir\ncd ~/homer_ws/src  # navigate into the src dir\ngit clone https://github.com/linzhangUCA/homer_bringup  # clone hardware interface, required by RPi\ngit clone https://github.com/linzhangUCA/homer_navigation  # clone navigation pack, optional on RPi\ncd ~/homer_ws  # navigate to workspace\ncolcon build  # build workspace (all packages in it)\nsource ~/homer_ws/install/local_setup.bash  # register homer packages\n</code></pre> <p>If you want to set <code>homer_ws</code> as your default ROS 2 workspace, then add the registration command: <code>source $HOME/homer_ws/install/local_setup.bash</code> in the <code>$HOME/bashrc</code> file.</p> <p>An example of a fully loaded system configuration file for ROS 2 and HomeR is shown as below.</p> <pre><code>source /opt/ros/jazzy/setup.bash  # activate ros2\nexport ROS_DOMAIN_ID=123  # same on all devices, 0~232\nexport RMW_IMPLEMENTATION=rmw_cyclonedds_cpp  # use cyclonedds\nsource /usr/share/colcon_argcomplete/hook/colcon-argcomplete.bash  # autocomplete colcon commands\nexport _colcon_cd_root=/opt/ros/jazzy/  # specify ros2 root dir\nsource $HOME/homer_ws/install/local_setup.bash  # register HomeR's packages\n</code></pre>"},{"location":"setup/ros_setup/","title":"Setup ROS 2 Packages","text":"<p>We will install and set up system environment of ROS 2 on both Raspberry Pi and a host computer.</p> Operating System (OS) <p>According to the REP-2000 list, Ubuntu 24.04 and Windows 10 are both tier 1 supported OS by ROS 2 Jazzy, and MacOS is on the tier 3 list. This means you can pretty much install ROS 2 on any OS. But installing Ubuntu on Raspberry Pi is way easier. Interested readers can follow the official guides to: - install ROS 2 on Windows - build ROS 2 from source on MacOS - or simply run ROS 2 in dockers.</p>"},{"location":"setup/ros_setup/#1-installation","title":"1. Installation","text":"<p>Please refer to the official guide to install ROS 2 with Ubuntu <code>deb</code> packages.</p> <p>Version Binding</p> <p>If this is your first time, please strictly bind the ROS 2 version: Jazzy with Ubuntu version: 24.04.</p> <p>We have summarized all the shell commands from the official guide as below. Copy and paste them to your terminal window to install ROS 2</p> <pre><code># Set locale\nsudo apt update &amp;&amp; sudo apt upgrade -y\nsudo apt install locales\nsudo locale-gen en_US en_US.UTF-8\nsudo update-locale LC_ALL=en_US.UTF-8 LANG=en_US.UTF-8\nexport LANG=en_US.UTF-8\n\n# Enable required repositories\nsudo apt install software-properties-common\nsudo add-apt-repository universe\n\nsudo apt update &amp;&amp; sudo apt install curl -y\nexport ROS_APT_SOURCE_VERSION=$(curl -s https://api.github.com/repos/ros-infrastructure/ros-apt-source/releases/latest | grep -F \"tag_name\" | awk -F\\\" '{print $4}')\ncurl -L -o /tmp/ros2-apt-source.deb \"https://github.com/ros-infrastructure/ros-apt-source/releases/download/${ROS_APT_SOURCE_VERSION}/ros2-apt-source_${ROS_APT_SOURCE_VERSION}.$(. /etc/os-release &amp;&amp; echo ${UBUNTU_CODENAME:-${VERSION_CODENAME}})_all.deb\"\nsudo dpkg -i /tmp/ros2-apt-source.debl\n\n# Install development tools\nsudo apt update &amp;&amp; sudo apt install ros-dev-tools\n\n# Install ROS 2\nsudo apt install ros-jazzy-desktop\n</code></pre>"},{"location":"setup/ros_setup/#2-verify-ros-2-installation","title":"2. Verify ROS 2 Installation","text":"<p>This step verifies if ROS 2's communication, C++ and Python API are working correctly.</p> Tip <p>This is exactly the same as the Try some examples section in the official installation guide.</p> <p>In one terminal, source the setup file and then run a C++ <code>talker</code>:</p> <pre><code>source /opt/ros/jazzy/setup.bash\nros2 run demo_nodes_cpp talker\n</code></pre> <p>In another terminal source the setup file and then run a Python <code>listener</code>:</p> <pre><code>source /opt/ros/jazzy/setup.bash\nros2 run demo_nodes_py listener\n</code></pre> Tip <p>Hold <code>Ctrl</code> then press <code>c</code> on the keyboard will terminate the executing program.</p>"},{"location":"setup/ros_setup/#3-ros-2-environment-setup","title":"3. ROS 2 Environment Setup","text":"<ul> <li>Install CycloneDDS (from terminal).</li> </ul> <pre><code>sudo apt install ros-jazzy-rmw-cyclonedds-cpp\n</code></pre> <p>Edit <code>$HOME/bashrc</code> file and add following to (the bottom of) the file.</p> <pre><code>source /opt/ros/jazzy/setup.bash  # activate ros2\nexport ROS_DOMAIN_ID=123  # same on all devices, 0~232\nexport RMW_IMPLEMENTATION=rmw_cyclonedds_cpp  # use cyclonedds\nsource /usr/share/colcon_argcomplete/hook/colcon-argcomplete.bash  # autocomplete colcon commands\nexport _colcon_cd_root=/opt/ros/jazzy/  # specify ros2 root dir\n</code></pre> <p>Note</p> <p><code>ROS_DOMAIN_ID</code> can be set to any number between 0 and 232. See the following section for more details.</p> User Configuration Script <p>In Ubuntu (and many Linux distros), a shell configuration file is saved at <code>$HOME/.bashrc</code>. The commands stored in this file will be executed every time the user started a terminal session.</p>"},{"location":"setup/ros_setup/#quick-explanation","title":"Quick Explanation","text":"<ol> <li> <p>Add <code>source /opt/ros/jazzy/setup.bash</code> to <code>$HOME/.bashrc</code> file will automatically activate <code>ros2</code> command. Or, we need to manually activate it every time a new terminal started, which is very inconvenient.</p> </li> <li> <p>To ensure nodes running on different devices can communicate with each other, we need to designate a domain ID to these devices. Append <code>export ROS_DOMAIN_ID=&lt;id_number&gt;</code> to <code>$HOME/.bashrc</code> file, where <code>&lt;id_number&gt;</code> should be within the range between 0 to 232. For more details, please read the official guide about domain ID.</p> </li> <li> <p>ROS 2 is using Data Distribution System (DDS) for communication management. The default FastDDS is OK, but not the ideal one for working with the navigation. We found Eclipse CycloneDDS is a good alternative, so we install it by: <code>sudo apt install ros-jazzy-rmw-cyclonedds-cpp</code>. Then enable it by appending <code>export RMW_IMPLEMENTATION=rmw_cyclonedds_cpp</code> to the <code>$HOME/.bashrc</code> file.</p> </li> <li> <p><code>colcon</code> is a command line tool to improve the workflow of building, testing and using multiple software packages. Add <code>source /usr/share/colcon_argcomplete/hook/colcon-argcomplete.bash</code> to <code>$HOME/.bashrc</code> file will enable autocompletion function of <code>colcon</code>.</p> </li> <li> <p>We can quickly navigate around ROS 2 packages using the <code>colcon_cd</code> command. Set the system environment variable: <code>export _colcon_cd_root=/opt/ros/jazzy/</code> in <code>$HOME/.bashrc</code> will designate root directory of all ROS 2 packages.</p> </li> </ol>"}]}